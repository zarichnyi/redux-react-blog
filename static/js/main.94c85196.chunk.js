(this["webpackJsonpredux-react-blog"]=this["webpackJsonpredux-react-blog"]||[]).push([[0],{161:function(e,t,n){e.exports=n(174)},174:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(39),l=n.n(c),o=n(62),u=n(10),s=(n(169),n(194)),i=n(204),m=n(40),f=n.n(m),p=n(63),d="https://jsonplaceholder.typicode.com/posts/";function g(){return(g=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.map((function(e){return e.views=0,e})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=n(11),y=n(203),E=n(200),O=n(193),S=n(37),w=n(201),h=n(195),v=n(175),j=n(202),I=n(198),N=n(192),J=n(199),x="https://jsonplaceholder.typicode.com/comments/";function C(){return(C=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(x);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=n(118),U=[],D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setComments":return Object(k.a)(t.comments);default:return e}},A=function(){var e=Object(u.b)(),t=Object(b.e)().articleID,n=Object(u.c)((function(e){return e.comments.filter((function(e){return e.postId===+t}))}));return Object(a.useEffect)((function(){(function(){return C.apply(this,arguments)})().then((function(t){return e(function(e){return{type:"setComments",comments:e}}(t))}))}),[e]),r.a.createElement(J.a.Group,null,n.map((function(e){return r.a.createElement(J.a,{key:e.id},r.a.createElement(J.a.Content,null,r.a.createElement(J.a.Author,{as:"a"},e.email),r.a.createElement(J.a.Text,null,e.body)))})))},B=n(129),V=[],z=function(e,t){return{type:"editTitle",id:e,title:t}},F=function(e){return{type:"filterNews",id:e}},L=function(e){return{type:"setNews",news:e}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNews":return t.news;case"filterNews":return t.id&&JSON.parse(localStorage.getItem("news")).filter((function(e){return e.userId===t.id}))||JSON.parse(localStorage.getItem("news"));case"editTitle":var n=JSON.parse(localStorage.getItem("news")).map((function(e){return e.id!==t.id?Object(B.a)({},e):(e.title=t.title,e)}));return localStorage.setItem("news",JSON.stringify(n)),n;case"editBody":var a=JSON.parse(localStorage.getItem("news")).map((function(e){return e.id!==t.id?Object(B.a)({},e):(e.body=t.body,e)}));return localStorage.setItem("news",JSON.stringify(a)),a;case"deleteArticle":var r=JSON.parse(localStorage.getItem("news")).filter((function(e){return e.id!==t.id}));return localStorage.setItem("news",JSON.stringify(r)),r;case"addArticle":var c=JSON.parse(localStorage.getItem("news"));return c.push({userId:t.userId,id:t.articleId,title:t.title,body:t.body,views:0}),localStorage.setItem("news",JSON.stringify(c)),c;case"setViews":var l=JSON.parse(localStorage.getItem("news")).map((function(e){return e.id!==t.articleId?Object(B.a)({},e):(e.views=e.views+1,e)}));return localStorage.setItem("news",JSON.stringify(l)),l;case"sortByPopularity":var o=JSON.parse(localStorage.getItem("news")).sort((function(e,t){return t.views-e.views}));return localStorage.setItem("news",JSON.stringify(o)),o;case"latestNews":var u=JSON.parse(localStorage.getItem("news")).sort((function(e,t){return t.id-e.id}));return localStorage.setItem("news",JSON.stringify(u)),u;default:return e}},q=function(){var e=Object(b.e)().articleID,t=Object(u.b)(),n=Object(u.c)((function(t){return t.news.find((function(t){return t.id===+e}))})),c=Object(a.useState)(!1),l=Object(S.a)(c,2),o=l[0],s=l[1],i=Object(a.useState)(""),m=Object(S.a)(i,2),f=m[0],p=m[1],d=Object(a.useState)(!1),g=Object(S.a)(d,2),y=g[0],E=g[1],O=Object(a.useState)(""),J=Object(S.a)(O,2),x=J[0],C=J[1],k=function(e){"Enter"===e.key&&f?(t(z(n.id,f)),t(F(JSON.parse(localStorage.getItem("choosenUser")))),s(!1),p("")):"Enter"===e.key&&x&&(t({type:"editBody",id:n.id,body:x}),t(F(JSON.parse(localStorage.getItem("choosenUser")))),E(!1),C("")),"Escape"===e.key&&(p(""),s(!1))},U=function(){f?(t(z(n.id,f)),t(F(JSON.parse(localStorage.getItem("choosenUser")))),s(!1),p("")):(s(!1),p(""))};return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(w.a,null,r.a.createElement(w.a.Content,null,r.a.createElement(h.a,{content:"Edit title",trigger:r.a.createElement(v.a,{size:"mini",icon:"edit outline",onClick:function(){return s(!o)}})}),r.a.createElement(h.a,{content:"Delete article",trigger:r.a.createElement(v.a,{size:"mini",icon:"delete",onClick:function(){t({type:"deleteArticle",id:n.id}),t(F(JSON.parse(localStorage.getItem("choosenUser"))))}})}),o?r.a.createElement(I.a,null,r.a.createElement(N.a,{defaultValue:n.title,onChange:function(e,t){return p(t.value)},onKeyDown:k,onBlur:U})):r.a.createElement(j.a,{as:"h2",style:{margin:0}},n.title)),r.a.createElement(w.a.Content,null,r.a.createElement(h.a,{content:"Edit body",trigger:r.a.createElement(v.a,{size:"mini",icon:"edit outline",onClick:function(){return E(!y)}})}),y?r.a.createElement(I.a,null,r.a.createElement(N.a,{defaultValue:n.body,onChange:function(e,t){return C(t.value)},onKeyDown:k,onBlur:U})):r.a.createElement(w.a.Content,{description:n.body}),r.a.createElement(w.a.Description,null,r.a.createElement(A,null)))))},P=function(){var e=Object(u.c)((function(e){return e.news})),t=Object(a.createRef)(),n=Object(u.b)();return r.a.createElement("div",{ref:t},r.a.createElement(y.a,{columns:2},r.a.createElement(y.a.Column,null,r.a.createElement(E.a,{link:!0},e.map((function(e){return r.a.createElement(E.a.Item,{as:o.b,to:"/news/".concat(e.id),key:e.id,onClick:function(){return n({type:"setViews",articleId:e.id})}},r.a.createElement(i.a,null,r.a.createElement(y.a,{columns:"equal"},r.a.createElement(y.a.Column,{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("span",null,e.title),r.a.createElement("span",{style:{color:"blue"}},"Views:",e.views)))))})))),r.a.createElement(y.a.Column,{style:{zIndex:0}},r.a.createElement(O.a,{context:t,pushing:!0},r.a.createElement(b.a,{path:"/news/:articleID",component:q})))))},K=n(197),G=n(196),R="https://jsonplaceholder.typicode.com/users/";function H(){return(H=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(R);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=[],Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setUsers":return Object(k.a)(t.users);default:return e}},W=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.users.map((function(e){return{key:e.id,text:e.name,value:e.id}}))}));return t.unshift({key:0,text:"All",value:0}),Object(a.useEffect)((function(){(function(){return H.apply(this,arguments)})().then((function(t){return e(function(e){return{type:"setUsers",users:e}}(t))}))}),[e]),r.a.createElement(K.a,{compact:!0},r.a.createElement(G.a,{placeholder:"All",selection:!0,options:t,defaultValue:JSON.parse(localStorage.getItem("choosenUser")),onChange:function(t,n){e(F(n.value)),localStorage.setItem("choosenUser",JSON.stringify(n.value))}}))},X=n(191),Y=function(){var e=Object(u.c)((function(e){return e.users.map((function(e){return{key:e.id,text:e.name,value:e.id}}))})),t=Object(a.useState)(!1),n=Object(S.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(""),m=Object(S.a)(o,2),f=m[0],p=m[1],d=Object(a.useState)(""),g=Object(S.a)(d,2),b=g[0],y=g[1],E=Object(a.useState)(1),O=Object(S.a)(E,2),w=O[0],h=O[1],j=Object(u.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{style:{marginLeft:40},onClick:function(){return l(!c)}},"Add article"),c&&r.a.createElement(s.a,{style:{zIndex:1,position:"absolute",top:"20vh",left:"10vw",height:"500px",width:"800px",border:"1px solid black",backgroundColor:"grey"}},r.a.createElement(i.a,{style:{backgroundColor:"grey"}},r.a.createElement(I.a,{onSubmit:function(e){e.preventDefault(),function(){var e,t,n,a;j((e=f,t=b,n=w,a=+Date.now(),{type:"addArticle",title:e,body:t,userId:n,articleId:a})),l(!c),p(""),y(""),h(1)}()}},r.a.createElement(X.a,{placeholder:"Title",required:!0,style:{margin:"20px 0",width:"100%"},value:f,onChange:function(e){return p(e.target.value)}}),r.a.createElement(N.a,{placeholder:"Body",required:!0,value:b,onChange:function(e){return y(e.target.value)}}),r.a.createElement(G.a,{name:"users",selection:!0,options:e,defaultValue:1,onChange:function(e,t){return h(t.value)},style:{margin:"0 10px"}}),r.a.createElement(v.a,{type:"submit",style:{margin:"20px 0"}},"Submit"),r.a.createElement(v.a,{onClick:function(){l(!c),p(""),y(""),h(1)},style:{margin:"0 10px"}},"Cancel")))))},Z=function(){var e=Object(u.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{style:{marginLeft:40},onClick:function(){return e({type:"sortByPopularity"})}},"Popular News"))},$=function(){var e=Object(u.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{style:{marginLeft:40},onClick:function(){return e({type:"latestNews"})}},"Last News"))};var _=function(){var e=Object(u.b)();return Object(a.useEffect)((function(){(function(){return g.apply(this,arguments)})().then((function(t){JSON.parse(localStorage.getItem("news"))?e(L(JSON.parse(localStorage.getItem("news")))):(e(L(t)),localStorage.setItem("news",JSON.stringify(t))),JSON.parse(localStorage.getItem("choosenUser"))&&e(F(JSON.parse(localStorage.getItem("choosenUser"))))}))}),[e]),r.a.createElement(s.a,null,r.a.createElement(i.a,null,r.a.createElement(W,null),r.a.createElement(Y,null),r.a.createElement(Z,null),r.a.createElement($,null)),r.a.createElement(i.a,null,r.a.createElement(P,null)))},ee=n(88),te=Object(ee.b)({news:T,comments:D,users:Q}),ne=Object(ee.c)(te);l.a.render(r.a.createElement(o.a,null,r.a.createElement(u.a,{store:ne},r.a.createElement(_,null))),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.94c85196.chunk.js.map